name: 全國電子訂單檢查系統

on:
  schedule:
    - cron: '0 1 * * *'   # 每天台灣時間 9:00 (UTC 01:00)
    - cron: '0 7 * * *'   # 每天台灣時間 15:00 (UTC 07:00)
  workflow_dispatch:

jobs:
  order-check:
    runs-on: ubuntu-latest
    steps:
    - name: 📥 檢出程式碼
      uses: actions/checkout@v4
    - name: 🐍 設定 Python 環境
      uses: actions/setup-python@v5
      with:
        python-version: '3.11'
    - name: 📦 安裝相依套件
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
    - name: 🚀 執行訂單檢查
      env:
        ELIFE_USERNAME: ${{ secrets.ELIFE_USERNAME }}
        ELIFE_PASSWORD: ${{ secrets.ELIFE_PASSWORD }}
        GMAIL_USER: ${{ secrets.GMAIL_USER }}
        GMAIL_PASSWORD: ${{ secrets.GMAIL_PASSWORD }}
        RECEIVER_EMAIL: ${{ secrets.RECEIVER_EMAIL }}
      run: python order_check.py
